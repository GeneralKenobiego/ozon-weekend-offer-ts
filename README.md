# ozon-weekend-offer-ts

Перечень проблем в оригинальном решении задачи https://github.com/StarWayMan/tech_interview_task/blob/main/README.md

1. Есть ошибки в логике, например:

- в fetchUrls() на каждый subBreed делается два запроса урла с картинкой;
- метод загрузки на Я.Диск не вызывается;
- в методе загрузки не учитывается то, что апи при успехе возвращает ссылку на асинхронную операцию;
- при создании папки мы передаем ее имя, а при чтении (72 строка) оно прибито в урле;
- проверки вида 'response || []' не несут смысла;

2. Нет ассертов;
3. Тест не готов к перезапускам потому что нет чистки тестовых данных;
4. Логика теста запрятана внутрь одной функции, т.е он однострочный и ненаглядный, а надо двигаться в сторону DAMP (Descriptive And Meaningful Phrases) чтобы было проще понимать и поддерживать тест;
5. Непонятно как этот тест должен запускаться и как собирать результаты его работы, не вижу никакого фреймворка для этого;
6. Все свалено в один файл;
7. Функции, работающие с одной апи dog.ceo, разбросаны вне класса;
8. Нет обработки ошибок;
9. Нехватает конфигурирования через констукторы;
10. Токен открыто лежит;
11. Используется any[], хотя можно точно указывать типы;
12. Не все названия функций дают представление о том что они делают;
13. Мне нравится добавлять документирование JSDoc или хотя бы описания в комментариях к методам\классам, тут очень этого нехватает.

Мой вариант реализован на Cypress + ts. В нем:

- для двух апи с которыми нужно работать есть свои классы. Для класса под апи яндекса есть конфигурирование;
- реализована чистка данных;
- нет глобальных (в скопе теста) переменных;
- есть явные ассерты в тесте;
- сделан большой шаг в сторону DAMP, тест собран на цепочках методов;
- токен и урл яндекса прокидываются через cli в конфиг сайпреса при запуске;
- есть документирование.
